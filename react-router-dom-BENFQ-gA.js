import{r as i,a as H}from"./react-CuHAHrkP.js";import{R as K}from"./react-dom-CSeHBi8o.js";import{m as W,l as G,D as X,a as Y,R as q,u as J,b as j,c as M,N as Q,d as Z,e as $}from"./react-router-eWVM2Cnq.js";import{c as ee,b as te,E as re,s as ne,d as k}from"./@remix-run-DxFES9XG.js";/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C(){return C=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},C.apply(this,arguments)}function ae(e,r){if(e==null)return{};var t={},a=Object.keys(e),n,s;for(s=0;s<a.length;s++)n=a[s],!(r.indexOf(n)>=0)&&(t[n]=e[n]);return t}function ie(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function se(e,r){return e.button===0&&(!r||r==="_self")&&!ie(e)}function U(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,t)=>{let a=e[t];return r.concat(Array.isArray(a)?a.map(n=>[t,n]):[[t,a]])},[]))}function oe(e,r){let t=U(e);return r&&r.forEach((a,n)=>{t.has(n)||r.getAll(n).forEach(s=>{t.append(n,s)})}),t}const le=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ue="6";try{window.__reactRouterVersion=ue}catch{}function _e(e,r){return ee({basename:r==null?void 0:r.basename,future:C({},r==null?void 0:r.future,{v7_prependBasename:!0}),history:te({window:r==null?void 0:r.window}),hydrationData:(r==null?void 0:r.hydrationData)||ce(),routes:e,mapRouteProperties:W,dataStrategy:r==null?void 0:r.dataStrategy,patchRoutesOnNavigation:r==null?void 0:r.patchRoutesOnNavigation,window:r==null?void 0:r.window}).initialize()}function ce(){var e;let r=(e=window)==null?void 0:e.__staticRouterHydrationData;return r&&r.errors&&(r=C({},r,{errors:fe(r.errors)})),r}function fe(e){if(!e)return null;let r=Object.entries(e),t={};for(let[a,n]of r)if(n&&n.__type==="RouteErrorResponse")t[a]=new re(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let s=window[n.__subType];if(typeof s=="function")try{let l=new s(n.message);l.stack="",t[a]=l}catch{}}if(t[a]==null){let s=new Error(n.message);s.stack="",t[a]=s}}else t[a]=n;return t}const de=i.createContext({isTransitioning:!1}),he=i.createContext(new Map),ve="startTransition",D=H[ve],me="flushSync",F=K[me];function pe(e){D?D(e):e()}function _(e){F?F(e):e()}class we{constructor(){this.status="pending",this.promise=new Promise((r,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",r(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}}function Ce(e){let{fallbackElement:r,router:t,future:a}=e,[n,s]=i.useState(t.state),[l,d]=i.useState(),[f,o]=i.useState({isTransitioning:!1}),[c,p]=i.useState(),[h,T]=i.useState(),[w,b]=i.useState(),E=i.useRef(new Map),{v7_startTransition:x}=a||{},L=i.useCallback(u=>{x?pe(u):u()},[x]),v=i.useCallback((u,S)=>{let{deletedFetchers:m,flushSync:O,viewTransitionOpts:g}=S;m.forEach(y=>E.current.delete(y)),u.fetchers.forEach((y,B)=>{y.data!==void 0&&E.current.set(B,y.data)});let z=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!g||z){O?_(()=>s(u)):L(()=>s(u));return}if(O){_(()=>{h&&(c&&c.resolve(),h.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:g.currentLocation,nextLocation:g.nextLocation})});let y=t.window.document.startViewTransition(()=>{_(()=>s(u))});y.finished.finally(()=>{_(()=>{p(void 0),T(void 0),d(void 0),o({isTransitioning:!1})})}),_(()=>T(y));return}h?(c&&c.resolve(),h.skipTransition(),b({state:u,currentLocation:g.currentLocation,nextLocation:g.nextLocation})):(d(u),o({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}))},[t.window,h,c,E,L]);i.useLayoutEffect(()=>t.subscribe(v),[t,v]),i.useEffect(()=>{f.isTransitioning&&!f.flushSync&&p(new we)},[f]),i.useEffect(()=>{if(c&&l&&t.window){let u=l,S=c.promise,m=t.window.document.startViewTransition(async()=>{L(()=>s(u)),await S});m.finished.finally(()=>{p(void 0),T(void 0),d(void 0),o({isTransitioning:!1})}),T(m)}},[L,l,c,t.window]),i.useEffect(()=>{c&&l&&n.location.key===l.location.key&&c.resolve()},[c,h,n.location,l]),i.useEffect(()=>{!f.isTransitioning&&w&&(d(w.state),o({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),b(void 0))},[f.isTransitioning,w]),i.useEffect(()=>{},[]);let R=i.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:u=>t.navigate(u),push:(u,S,m)=>t.navigate(u,{state:S,preventScrollReset:m==null?void 0:m.preventScrollReset}),replace:(u,S,m)=>t.navigate(u,{replace:!0,state:S,preventScrollReset:m==null?void 0:m.preventScrollReset})}),[t]),P=t.basename||"/",N=i.useMemo(()=>({router:t,navigator:R,static:!1,basename:P}),[t,R,P]),I=i.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return i.useEffect(()=>G(a,t.future),[a,t.future]),i.createElement(i.Fragment,null,i.createElement(X.Provider,{value:N},i.createElement(Y.Provider,{value:n},i.createElement(he.Provider,{value:E.current},i.createElement(de.Provider,{value:f},i.createElement(q,{basename:P,location:n.location,navigationType:n.historyAction,navigator:R,future:I},n.initialized||t.future.v7_partialHydration?i.createElement(Re,{routes:t.routes,future:t.future,state:n}):r))))),null)}const Re=i.memo(Se);function Se(e){let{routes:r,future:t,state:a}=e;return J(r,void 0,a,t)}const ge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=i.forwardRef(function(r,t){let{onClick:a,relative:n,reloadDocument:s,replace:l,state:d,target:f,to:o,preventScrollReset:c,viewTransition:p}=r,h=ae(r,le),{basename:T}=i.useContext(Q),w,b=!1;if(typeof o=="string"&&ye.test(o)&&(w=o,ge))try{let v=new URL(window.location.href),R=o.startsWith("//")?new URL(v.protocol+o):new URL(o),P=ne(R.pathname,T);R.origin===v.origin&&P!=null?o=P+R.search+R.hash:b=!0}catch{}let E=Z(o,{relative:n}),x=Te(o,{replace:l,state:d,target:f,preventScrollReset:c,relative:n,viewTransition:p});function L(v){a&&a(v),v.defaultPrevented||x(v)}return i.createElement("a",C({},h,{href:w||E,onClick:b||s?a:L,ref:t,target:f}))});var V;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(V||(V={}));var A;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(A||(A={}));function Te(e,r){let{target:t,replace:a,state:n,preventScrollReset:s,relative:l,viewTransition:d}=r===void 0?{}:r,f=M(),o=j(),c=$(e,{relative:l});return i.useCallback(p=>{if(se(p,t)){p.preventDefault();let h=a!==void 0?a:k(o)===k(c);f(e,{replace:h,state:n,preventScrollReset:s,relative:l,viewTransition:d})}},[o,f,c,a,n,t,e,s,l,d])}function Ue(e){let r=i.useRef(U(e)),t=i.useRef(!1),a=j(),n=i.useMemo(()=>oe(a.search,t.current?null:r.current),[a.search]),s=M(),l=i.useCallback((d,f)=>{const o=U(typeof d=="function"?d(n):d);t.current=!0,s("?"+o,f)},[s,n]);return[n,l]}export{xe as L,Ce as R,_e as c,Ue as u};
